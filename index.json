{
  "index.html": {
    "href": "index.html",
    "title": "モデル駆動型アーキテクチャによる3D都市モデル標準ドキュメントの生成・管理システム",
    "keywords": "モデル駆動型アーキテクチャによる3D都市モデル標準ドキュメントの生成・管理システム モデル駆動型アーキテクチャを活用し、3D都市モデル標準ドキュメントの生成・管理におけるリソースの一元化と生成の自動化を図るシステムです。"
  },
  "manual/devMan.html": {
    "href": "manual/devMan.html",
    "title": "環境構築手順書",
    "keywords": "環境構築手順書 1 本書について 本書では、モデル駆動型アーキテクチャによる3D都市モデル標準ドキュメントの生成・管理システム（以下「本システム」という。）の利用環境構築手順について記載しています。 本システムは複数のアプリから構成されます。ライセンスがフリーのアプリが「ShapeChange」（JavaのJARファイル）と「Metanorma」（Rubyのgem）、ライセンスが必要なアプリが「Enterprise Architect」（EAと略す）と「Microsoft Excel」です。 ライセンスが必要なアプリの環境構築については記載を省略します。 本システムの構成や仕様の詳細については、レポジトリに格納したリソースフォルダ直下のマニュアルや、以下も参考にしてください。 技術検証レポート 2 動作環境 本システムの動作環境は以下のとおりです。 項目 最小動作環境 推奨動作環境 OS Microsoft Windows 10 または 11 Microsoft Windows 11 CPU Intel Core i7以上 同左 メモリ 16GB以上 同左 その他 ・利用可能なメモリは20～30G程度を確保すること ・ShapeChangeはEAと同じマシンにJRE11以上で環境構築すること ・インターネットにアクセス可能であり、各ミドルウェアがセキュリティで制限されないこと 同左 2 本システムのリソース システムを構成する各アプリが利用するリソースは こちら からダウンロードします。 ダウンロード後、zipファイルを右クリックし、「すべて展開」を選択することで、zipファイルを展開します。 3 構築手順（EAのプロジェクトファイルとShapeChange） ShapeChangeはEAのプロジェクトファイルからurfとuroのXSDを出力するのに利用します。本システムではVer3.1.0を利用しているため、利用マシンにはJRE11の環境をご準備ください。 ShapeChange-3.1.0 解凍したフォルダーを、そのまま作業用フォルダー（以下「ShapeChange-3.1.0フォルダー」という）として利用できます。 ShapeChange-3.1.0フォルダーの「ShapeChangeConfig_Plateau_urf.xml」がurfの、「ShapeChangeConfig_Plateau_uro.xml」がuroのConfigファイルです。 また、ShapeChange-3.1.0フォルダーの「202503_current_plateau_v5.0.eapx」がEAのプロジェクトファイルで、このファイルから出力したqeaファイルも、ShapeChange-3.1.0フォルダーに格納して利用します。 なお、展開されたリソース内の「XSD整形_2024年度用.xlsm」が、ShapeChangeで出力したXSDの整形プログラムを実装しています。 4 構築手順（Metanorma） Metanormaは、adocファイルや画像ファイル等から構成されたコンテンツから、指定したスタイルでドキュメントを生成（ビルド）します。 展開されたフォルダ内の「sources/001-v5/document.adoc」が標準製品仕様書、「sources/002-v5/document.adoc」が標準作業手順書を指定して、ビルドを実行します。 Metanormaの開発環境は下記の通り構築します。 （1）下記サイトから、RubyのWindows向けでWITH DEVKITのインストーラをDLして、インストールを実行します（オプションはすべてデフォルトとします）。完了画面にて下図のチェックボックスを選択し、「Finish」ボタンを押下するとコマンド画面が立ち上がってくるので、ENTERを押下します（レスポンスが遅いので留意してください）。 Rubyインストーラー （2）コマンド画面が閉じたら、管理者モードでPowerShellを立ち上げ、「ruby –v」コマンドを実行し（インストールVerが確認できればインストールできている）、そのまま「gem install metanorma-cli」にてメタノーマをインストールしてください。 （3）インストールマシンにJava実行環境がない場合は、JRE11で環境を構築ください（MetanormaのPDF出力機能はJavaを利用しています）。 5 その他 adocファイルの編集はテキストエディターで可能ですが、Visual Studio Codeにて、下記の拡張機能の利用を推奨します。 またここでは省略するが、出力でFireLightというHTMLビューラッパーを生成することが可能である、下記を参照のこと。 FireLight"
  },
  "manual/userMan.html": {
    "href": "manual/userMan.html",
    "title": "操作マニュアル",
    "keywords": "操作マニュアル 1 本書について 本書では、モデル駆動型アーキテクチャによる3D都市モデル標準ドキュメントの生成・管理システム（以下「本システム」という。）の操作手順について記載しています。 本システムの構成や仕様の詳細については、レポジトリに格納したリソースフォルダ直下のマニュアルや、以下も参考にしてください。 技術検証レポート 2 概念モデルと符号化仕様の作成 2-1 qea変換のオペレーション ShapeChangeでXSDを出力するため、「Enterprise Architect」（以下、「EA」と略す）のプロジェクトファイルから、qea形式のプロジェクトファイルを出力します。 ユーザインタフェーズについては、EAの公式サイト、またはリソースフォルダ直下のマニュアルを参照ください。 ① EAにて、「メインメニュー」の「プロジェクト」の「転送」から、「EAP/EAPXファイルの変換」を選択します ② サブウインドウから、インプットを元のプロジェクトファイル、出力を「QEAファイル」で任意の名前を設定し、転送します。 ③ 変換したqeaファイルは、ShapeChangeのJARファイルと同一階層に配置するようにしてください。 2-2 XSD出力のオペレーション qeaファイルからShapeChangeを利用して、urfとuroのXSDを出力します。 ① PowerShellを管理者モードで開き、カレントディレクトリをShapeChange のJARファイルのあるフォルダーに変更します。 ② 「java -jar ShapeChange-3.1.0.jar -Dfile.encoding=UTF-8 -c AAA」（AAAはConfigファイルのパスとします）を実行すると、Config指定の出力先にXSDが出力されます。 ・Configファイルはurfとuroで二つあります、AAAを書き換えて二回実行ください。 2-3 XSD整形のオペレーション XSDを3D都市モデルで利用する形に整形します。 ① 「XSD整形_2024年度用.xlsm」のワークシート「do」の表に、urf/uroの入出力XSD、及びuroのVerを小数点以下一位まで設定します。 ② ワークシート「uro_add」に、uroで追加したい行を設定します。 ③ 「実行ボタン」を押下すると、設定したパスにXSDが出力されます 3 概念モデルとドキュメント作成 3-1 XMIとUMLクラス図画像の出力オペレーション EAから標準製品仕様書にレンダリングするUMLクラス図画像と、応用スキーマ文書のソースとなるXMIファイルを出力します。 ユーザインタフェーズについては、EAの公式サイト、またはリソースフォルダ直下のマニュアルを参照ください。 ① EAにて、「メインメニュー」の「生成・入出力」の「出力」から、「その他の形式」を選択します。 ② サブウインドウにて下図の出力設定を行い、出力ボタンを押下します。 ・ダイアグラムの画像フォーマットを、SVGとPNGのそれぞれを設定して、二回出力を行います。 ・パッケージはプロジェクトファイルのTOPプロジェクトを選択し、出力ファイル名は「plateau_all_packages_export.xmi」としてください。 ③ Metanormaリソースのフォルダーにて、「sources/xmi」にXMIファイルを上書き保存し、画像は「sources/001-v5/images」フォルダに上書き保存します。 3-2 ファイル生成のオペレーション Metanormaを使い、adocやXMI、画像ファイルといったリソースファイル一式から標準製品仕様書と標準作業手順書を出力します。 ① PowerShellを管理者モードで開き、カレントディレクトリを、「Metanormaコンテンツ用TOPフォルダー」（sourcesの一つ上の階層）に変更します。 ② カレントディレクトリから「Gemfile.lock」ファイルがある場合は削除します。 ③ PowerShellにて、「bundle install」を実行し、実行完了後に「bundle update」を実行します。 ④ PowerShellにて、下記のとおり生成コマンドを実行します。 生成対象 コマンド 出力先 ・標準製品仕様書 bundle exec metanorma sources/001-v5/document.adoc sources/001-v5 ・標準作業手順書 bundle exec metanorma sources/002-v5/document.adoc sources/002-v5 ・同時出力 bundle exec metanorma site generate --agree-to-terms 「Metanormaコンテンツ用TOPフォルダー」直下に生成される出力フォルダー"
  }
}